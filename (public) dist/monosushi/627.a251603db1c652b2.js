"use strict";(self.webpackChunkmonosushi=self.webpackChunkmonosushi||[]).push([[627],{5627:(W,x,s)=>{s.r(x),s.d(x,{AdminModule:()=>j});var u=s(6895),y=s(9424),g=s(2786),t=s(1571),Z=s(4998);const A=function(){return["discount"]},T=function(){return["category"]},O=function(){return["product"]};let M=(()=>{class n{constructor(e,o){this.router=e,this.accountService=o}logOut(){this.router.navigate(["/"]),localStorage.removeItem("currentUser"),this.accountService.isUserLogin$.next(!0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.F0),t.Y36(Z.B))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin"]],decls:15,vars:6,consts:[[1,"admin"],[1,"admin-menu"],[1,"admin-menu-btns"],["type","button","routerLinkActive","active",3,"routerLink"],["type","button"],["type","button",1,"exit-btn",3,"click"],[1,"admin-content"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),t._uU(4,"Discounts"),t.qZA(),t.TgZ(5,"button",3),t._uU(6,"\u0421ategories"),t.qZA(),t.TgZ(7,"button",3),t._uU(8,"Products"),t.qZA(),t.TgZ(9,"button",4),t._uU(10,"Orders"),t.qZA()(),t.TgZ(11,"button",5),t.NdJ("click",function(){return o.logOut()}),t._uU(12,"EXIT"),t.qZA()(),t.TgZ(13,"div",6),t._UZ(14,"router-outlet"),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("routerLink",t.DdM(3,A)),t.xp6(2),t.Q6J("routerLink",t.DdM(4,T)),t.xp6(2),t.Q6J("routerLink",t.DdM(5,O)))},dependencies:[g.lC,g.rH,g.Od],styles:[".admin[_ngcontent-%COMP%]{display:flex;margin-top:50px;margin-left:16px}.admin-menu-btns[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px}.admin-menu-btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:150px;padding:16px 30px;background-color:#fff;border:1px solid lightgray;border-left:none;font-size:16px}.admin-menu-btns[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{border-top:4px solid #b5d8f7;font-weight:700}.admin-menu[_ngcontent-%COMP%]   .exit-btn[_ngcontent-%COMP%]{font-size:18px;font-weight:700;padding:14px 20px;border-radius:10px;background-color:#b5d8f7;border:2px solid #b5d8f7;margin-left:40px}.admin-content[_ngcontent-%COMP%]{padding:20px 30px}@media (max-width: 1318px){.admin[_ngcontent-%COMP%]{margin-top:110px}}"]}),n})();var b=s(5861),l=s(3742),r=s(433),w=s(6700),h=s(7185);function U(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",11),t.NdJ("change",function(i){t.CHM(e);const c=t.oxw(2);return t.KtG(c.upload(i))}),t.qZA(),t.TgZ(2,"div",12),t._UZ(3,"div",13),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(3),t.Udp("width",e.uploadPercent,"%")}}function v(n,a){if(1&n){const e=t.EpF();t.ynx(0),t._UZ(1,"img",14),t.TgZ(2,"button",15),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.deleteImage())}),t._uU(3,"delete"),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("src",e.valueByControl("imagePath"),t.LSH)}}function F(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"form",4),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.saveDiscount())}),t.TgZ(1,"div"),t._UZ(2,"input",5)(3,"input",6),t.qZA(),t._UZ(4,"input",7)(5,"input",8),t.YNc(6,U,4,2,"ng-container",9),t.YNc(7,v,4,1,"ng-container",9),t.TgZ(8,"button",10),t._uU(9),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("formGroup",e.discountForm),t.xp6(6),t.Q6J("ngIf",!e.isUploaded),t.xp6(1),t.Q6J("ngIf",e.isUploaded),t.xp6(1),t.Q6J("disabled",e.discountForm.invalid),t.xp6(1),t.hij(" ",e.editStatus?"UPDATE DISCOUNT":"SAVE DISCOUNT"," ")}}function q(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,"..."),t.qZA())}function k(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",18),t._uU(10),t.ALo(11,"slice"),t.YNc(12,q,2,0,"span",9),t.qZA(),t.TgZ(13,"td",19),t._UZ(14,"img",20),t.qZA(),t.TgZ(15,"td",21)(16,"button",22),t.NdJ("click",function(){const c=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.editDiscount(c))}),t._uU(17,"Edit"),t.qZA(),t.TgZ(18,"button",23),t.NdJ("click",function(){const c=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.deleteDiscount(c))}),t._uU(19,"Delete"),t.qZA()()()}if(2&n){const e=a.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu(e.date),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.path),t.xp6(2),t.Oqu(e.title),t.xp6(2),t.hij(" ",t.Dn7(11,8,e.description,0,60)," "),t.xp6(2),t.Q6J("ngIf",e.description.length>60),t.xp6(2),t.Q6J("src",e.imagePath,t.LSH),t.xp6(4),t.Q6J("disabled",o.editStatus)}}function D(n,a){if(1&n&&(t.TgZ(0,"table",16)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Date"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Name"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Path"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Title"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Description"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Image"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Actions"),t.qZA()()(),t.TgZ(17,"tbody"),t.YNc(18,k,20,12,"tr",17),t.qZA()()),2&n){const e=t.oxw();t.xp6(18),t.Q6J("ngForOf",e.adminDiscounts)}}let S=(()=>{class n{constructor(e,o,i,c){this.discountService=e,this.fb=o,this.storage=i,this.toastr=c,this.adminDiscounts=[],this.currentDate=(new Date).toLocaleString("ru-RU",{month:"numeric",year:"numeric"}),this.discountsToggle=!1,this.editStatus=!1,this.isUploaded=!1}ngOnInit(){this.loadDiscounts(),this.initDiscountForm()}initDiscountForm(){this.discountForm=this.fb.group({date:[this.currentDate],name:[null,r.kI.required],path:[null,r.kI.required],title:[null,r.kI.required],description:[null,r.kI.required],imagePath:[null,r.kI.required]})}loadDiscounts(){this.discountService.getAllFirebase().subscribe(e=>{this.adminDiscounts=e})}toggleDiscount(){this.discountsToggle=!this.discountsToggle}saveDiscount(){this.editStatus?this.discountService.updateFirebase(this.discountForm.value,this.editID).then(()=>{this.loadDiscounts(),this.toastr.success("Discount successfully updated")}):(this.loadDiscounts(),this.discountService.createFirebase(this.discountForm.value).then(()=>{this.loadDiscounts(),this.toastr.success("Discount successfully created")})),this.editStatus=!1,this.discountForm.reset(),this.toggleDiscount(),this.isUploaded=!1,this.uploadPercent=0}editDiscount(e){this.discountForm.patchValue({date:this.currentDate,name:e.name,path:e.path,title:e.title,description:e.description,imagePath:e.imagePath}),this.editStatus=!0,this.editID=e.id,this.toggleDiscount(),this.isUploaded=!0}deleteDiscount(e){this.discountService.deleteFirebase(e.id).then(()=>{this.loadDiscounts(),this.toastr.success("Discount successfully deleted")})}upload(e){const o=e.target.files[0];this.uploadFile("images",o.name,o).then(i=>{this.discountForm.patchValue({imagePath:i}),this.isUploaded=!0}).catch(i=>{console.error(i)})}uploadFile(e,o,i){var c=this;return(0,b.Z)(function*(){const d=`${e}/${o}`;let m="";if(i)try{const p=(0,l.iH)(c.storage,d),_=(0,l.B0)(p,i);(0,l.e9)(_).subscribe(f=>{c.uploadPercent=f.progress}),yield _,m=yield(0,l.Jt)(p)}catch(p){console.error(p)}else console.log("wrong format");return Promise.resolve(m)})()}deleteImage(){const e=(0,l.iH)(this.storage,this.valueByControl("imagePath"));(0,l.oq)(e).then(()=>{console.log("File deleted"),this.isUploaded=!1,this.uploadPercent=0,this.discountForm.patchValue({imagePath:null})})}valueByControl(e){return this.discountForm.get(e)?.value}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w.r),t.Y36(r.qu),t.Y36(l.Ke),t.Y36(h._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-discount"]],decls:5,vars:2,consts:[[1,"admin-table"],["type","button",1,"add-btn",3,"click"],["class","add-form fade-in-down",3,"formGroup","ngSubmit",4,"ngIf"],["class","fade-in-down",4,"ngIf"],[1,"add-form","fade-in-down",3,"formGroup","ngSubmit"],["type","text","name","name","placeholder","*Name","formControlName","name",1,"name-input"],["type","text","name","title","placeholder","*Title","formControlName","title"],["type","text","name","path","placeholder","*Path","formControlName","path",2,"width","465px"],["type","text","name","description","placeholder","*Description","formControlName","description",1,"descr"],[4,"ngIf"],["type","submit",3,"disabled"],["type","file","name","","id","",3,"change"],[1,"progress"],[1,"bar"],["width","10%","alt","",3,"src"],["type","button",3,"click"],[1,"fade-in-down"],[4,"ngFor","ngForOf"],[1,"table-descr"],[1,"table-img"],["alt","","height","50px",3,"src"],[1,"btns-wrapper"],["type","button",1,"table-btn",3,"click"],["type","button",1,"table-btn",3,"disabled","click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return o.toggleDiscount()}),t._uU(2,"ADD DISCOUNT"),t.qZA(),t.YNc(3,F,10,5,"form",2),t.YNc(4,D,19,1,"table",3),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",o.discountsToggle),t.xp6(1),t.Q6J("ngIf",!o.discountsToggle))},dependencies:[u.sg,u.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,u.OU],styles:["table[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid rgb(215,213,230)}td[_ngcontent-%COMP%]{padding:30px 10px 10px}thead[_ngcontent-%COMP%]{border-bottom:3px solid #b5d8f7}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 10px 18px}th[_ngcontent-%COMP%]{text-align:left;font-weight:400}.table-img[_ngcontent-%COMP%]{position:relative;min-width:150px}.table-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:16px}.table-descr[_ngcontent-%COMP%]{max-width:300px}.add-btn[_ngcontent-%COMP%]{padding:16px 46px;font-size:18px;font-weight:700;border-radius:10px;background-color:#fff;border:2px solid #b5d8f7;margin-bottom:16px}.add-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.add-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:250px;padding:16px;font-size:18px;font-weight:700;border-radius:10px;background-color:#fff;border:2px solid #b5d8f7;margin-top:14px}input[_ngcontent-%COMP%]{width:200px;border-radius:8px;border:2px solid rgb(227,225,240);padding:14px 30px 14px 16px;margin-top:14px}.name-input[_ngcontent-%COMP%]{margin-right:14px}.descr[_ngcontent-%COMP%]{width:465px;padding-bottom:100px}input[_ngcontent-%COMP%]:focus{outline:3px solid rgba(89,172,255,.3);border-color:#59acff99}.btns-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.table-btn[_ngcontent-%COMP%]{background-color:inherit;border:none;font-size:16px;font-weight:700;color:#b5d8f7;margin-bottom:6px}.progress[_ngcontent-%COMP%]{display:block;max-width:250px;height:20px;background-color:#fff2df;margin-top:10px;border-radius:5px}.bar[_ngcontent-%COMP%]{display:block;width:0%;height:100%;background-color:#b5d8f7;border-radius:5px}input[type=file][_ngcontent-%COMP%]::-webkit-file-upload-button{background-color:#fff2df;color:#000;border-radius:5px;border:2px solid #fff2df;padding:4px;font-size:16px;cursor:pointer}.fade-in-down[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_fadeInDown;animation-duration:.3s;animation-fill-mode:both}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translate3d(0,-10%,0)}to{opacity:1;transform:none}}"]}),n})();var C=s(608);let P=(()=>{class n{constructor(e){this.storage=e,this.uploadPercent=0}uploadFile(e,o,i){var c=this;return(0,b.Z)(function*(){const d=`${e}/${o}`;let m="";if(i)try{const p=(0,l.iH)(c.storage,d),_=(0,l.B0)(p,i);(0,l.e9)(_).subscribe(f=>{c.uploadPercent=f.progress}),yield _,m=yield(0,l.Jt)(p)}catch(p){console.error(p)}else console.log("wrong format");return Promise.resolve(m)})()}deleteUploadFile(e){const o=(0,l.iH)(this.storage,e);return(0,l.oq)(o)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(l.Ke))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function I(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",9),t.NdJ("change",function(i){t.CHM(e);const c=t.oxw(2);return t.KtG(c.upload(i))}),t.qZA(),t.TgZ(2,"div",10),t._UZ(3,"div",11),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(3),t.Udp("width",e.uploadPercent,"%")}}function J(n,a){if(1&n){const e=t.EpF();t.ynx(0),t._UZ(1,"img",12),t.TgZ(2,"button",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.deleteImage())}),t._uU(3,"delete"),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("src",e.valueByControl("imagePath"),t.LSH)}}function N(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"form",4),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.saveCategory())}),t.TgZ(1,"div"),t._UZ(2,"input",5)(3,"input",6),t.qZA(),t.YNc(4,I,4,2,"ng-container",7),t.YNc(5,J,4,1,"ng-container",7),t.TgZ(6,"button",8),t._uU(7),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("formGroup",e.categoryForm),t.xp6(4),t.Q6J("ngIf",!e.isUploaded),t.xp6(1),t.Q6J("ngIf",e.isUploaded),t.xp6(1),t.Q6J("disabled",e.categoryForm.invalid),t.xp6(1),t.hij(" ",e.editStatus?"UPDATE CATEGORY":"SAVE CATEGORY"," ")}}function Q(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",16),t._UZ(8,"img",17),t.qZA(),t.TgZ(9,"td",18)(10,"button",19),t.NdJ("click",function(){const c=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.editCategory(c))}),t._uU(11,"Edit"),t.qZA(),t.TgZ(12,"button",20),t.NdJ("click",function(){const c=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.deleteCategory(c))}),t._uU(13,"Delete"),t.qZA()()()}if(2&n){const e=a.$implicit,o=t.oxw(2);t.xp6(2),t.hij("\u2116",e.id,""),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.path),t.xp6(2),t.Q6J("src",e.imagePath,t.LSH),t.xp6(4),t.Q6J("disabled",o.editStatus)}}function Y(n,a){if(1&n&&(t.TgZ(0,"table",14)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"\u2116"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Name"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Path"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Image"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Actions"),t.qZA()()(),t.TgZ(13,"tbody"),t.YNc(14,Q,14,5,"tr",15),t.qZA()()),2&n){const e=t.oxw();t.xp6(14),t.Q6J("ngForOf",e.adminCategories)}}let G=(()=>{class n{constructor(e,o,i,c){this.categoryService=e,this.fb=o,this.imageService=i,this.toastr=c,this.adminCategories=[],this.editStatus=!1,this.isUploaded=!1,this.categoryToggle=!1}ngOnInit(){this.loadCategories(),this.initCategoryForm()}initCategoryForm(){this.categoryForm=this.fb.group({name:[null,r.kI.required],path:[null,r.kI.required],imagePath:[null,r.kI.required]})}loadCategories(){this.categoryService.getAllFirebase().subscribe(e=>{this.adminCategories=e})}toggleCategory(){this.categoryToggle=!this.categoryToggle}saveCategory(){this.editStatus?this.categoryService.updateFirebase(this.categoryForm.value,this.currCategoryID).then(()=>{this.loadCategories(),this.toastr.success("Category successfully updated")}):this.categoryService.createFirebase(this.categoryForm.value).then(()=>{this.loadCategories(),this.toastr.success("Category successfully created")}),this.editStatus=!1,this.categoryForm.reset(),this.isUploaded=!1,this.uploadPercent=0,this.toggleCategory()}editCategory(e){this.categoryForm.patchValue({name:e.name,path:e.path,imagePath:e.imagePath}),this.editStatus=!0,this.currCategoryID=e.id.toString(),this.isUploaded=!0,this.toggleCategory()}deleteCategory(e){this.categoryService.deleteFirebase(e.id).then(()=>{this.loadCategories(),this.toastr.success("Category successfully deleted")})}upload(e){const o=e.target.files[0];this.imageService.uploadFile("images",o.name,o).then(i=>{this.categoryForm.patchValue({imagePath:i}),this.isUploaded=!0}).catch(i=>{console.error(i)})}deleteImage(){this.imageService.deleteUploadFile(this.valueByControl("imagePath")).then(()=>{console.log("File deleted"),this.isUploaded=!1,this.uploadPercent=0,this.categoryForm.patchValue({imagePath:null})}).catch(e=>{console.log(e)})}valueByControl(e){return this.categoryForm.get(e)?.value}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.H),t.Y36(r.qu),t.Y36(P),t.Y36(h._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-category"]],decls:5,vars:2,consts:[[1,"admin-table"],["type","button",1,"add-btn",3,"click"],["class","add-form fade-in-down",3,"formGroup","ngSubmit",4,"ngIf"],["class","fade-in-down",4,"ngIf"],[1,"add-form","fade-in-down",3,"formGroup","ngSubmit"],["type","text","name","name","placeholder","*Name","formControlName","name",1,"name-input"],["type","text","name","path","placeholder","*Path","formControlName","path"],[4,"ngIf"],["type","submit",3,"disabled"],["type","file","name","","id","",3,"change"],[1,"progress"],[1,"bar"],["width","10%","alt","",3,"src"],["type","button",3,"click"],[1,"fade-in-down"],[4,"ngFor","ngForOf"],[1,"table-img"],["alt","","height","50px",3,"src"],[1,"btns-wrapper"],["type","button",1,"table-btn",3,"click"],["type","button",1,"table-btn",3,"disabled","click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return o.toggleCategory()}),t._uU(2,"ADD CATEGORY"),t.qZA(),t.YNc(3,N,8,5,"form",2),t.YNc(4,Y,15,1,"table",3),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",o.categoryToggle),t.xp6(1),t.Q6J("ngIf",!o.categoryToggle))},dependencies:[u.sg,u.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:["table[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid rgb(215,213,230)}td[_ngcontent-%COMP%]{padding:30px 10px 10px}thead[_ngcontent-%COMP%]{border-bottom:3px solid #b5d8f7}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 10px 18px}th[_ngcontent-%COMP%]{min-width:200px;text-align:left;font-weight:400}.table-img[_ngcontent-%COMP%]{position:relative;min-width:150px}.table-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:16px}.table-descr[_ngcontent-%COMP%]{max-width:300px}.add-btn[_ngcontent-%COMP%]{padding:16px 46px;font-size:18px;font-weight:700;border-radius:10px;background-color:#fff;border:2px solid #b5d8f7;margin-bottom:16px}.add-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:50px}.add-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:250px;padding:16px;font-size:18px;font-weight:700;border-radius:10px;background-color:#fff;border:2px solid #b5d8f7;margin-top:14px}input[_ngcontent-%COMP%]{width:200px;border-radius:8px;border:2px solid rgb(227,225,240);padding:14px 30px 14px 16px;margin-top:14px}.name-input[_ngcontent-%COMP%]{margin-right:14px}.descr[_ngcontent-%COMP%]{width:465px;padding-bottom:100px}input[_ngcontent-%COMP%]:focus{outline:3px solid rgba(89,172,255,.3);border-color:#59acff99}.btns-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.table-btn[_ngcontent-%COMP%]{background-color:inherit;border:none;font-size:16px;font-weight:700;color:#b5d8f7;margin-bottom:6px;text-align:left}.progress[_ngcontent-%COMP%]{display:block;max-width:250px;height:20px;background-color:#fff2df;margin-top:10px;border-radius:5px}.bar[_ngcontent-%COMP%]{display:block;width:0%;height:100%;background-color:#b5d8f7;border-radius:5px}input[type=file][_ngcontent-%COMP%]{width:415px}input[type=file][_ngcontent-%COMP%]::-webkit-file-upload-button{background-color:#fff2df;color:#000;border-radius:5px;border:2px solid #fff2df;padding:4px;font-size:16px;cursor:pointer}.fade-in-down[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_fadeInDown;animation-duration:.3s;animation-fill-mode:both}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translate3d(0,-10%,0)}to{opacity:1;transform:none}}"]}),n})();var H=s(1462);function E(n,a){if(1&n&&(t.TgZ(0,"option",14),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("ngValue",e),t.xp6(1),t.Oqu(e.name)}}function B(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",15),t.NdJ("change",function(i){t.CHM(e);const c=t.oxw(2);return t.KtG(c.upload(i))}),t.qZA(),t.TgZ(2,"div",16),t._UZ(3,"div",17),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(3),t.Udp("width",e.uploadPercent,"%")}}function z(n,a){if(1&n){const e=t.EpF();t.ynx(0),t._UZ(1,"img",18),t.TgZ(2,"button",19),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.deleteImage())}),t._uU(3,"delete"),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("src",e.valueByControl("imagePath"),t.LSH)}}function K(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"form",4),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.saveProduct())}),t.TgZ(1,"div")(2,"select",5),t.YNc(3,E,2,2,"option",6),t.qZA()(),t.TgZ(4,"div"),t._UZ(5,"input",7)(6,"input",8),t.qZA(),t.TgZ(7,"div"),t._UZ(8,"input",9),t.qZA(),t.TgZ(9,"div"),t._UZ(10,"input",10)(11,"input",11),t.qZA(),t.YNc(12,B,4,2,"ng-container",12),t.YNc(13,z,4,1,"ng-container",12),t.TgZ(14,"button",13),t._uU(15),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("formGroup",e.productForm),t.xp6(3),t.Q6J("ngForOf",e.adminCategories),t.xp6(9),t.Q6J("ngIf",!e.isUploaded),t.xp6(1),t.Q6J("ngIf",e.isUploaded),t.xp6(1),t.Q6J("disabled",e.productForm.invalid),t.xp6(1),t.hij(" ",e.editStatus?"UPDATE PRODUCT":"SAVE PRODUCT"," ")}}function L(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td",22),t._UZ(14,"img",23),t.qZA(),t.TgZ(15,"td",24)(16,"button",25),t.NdJ("click",function(){const c=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.editProduct(c))}),t._uU(17,"Edit"),t.qZA(),t.TgZ(18,"button",26),t.NdJ("click",function(){const c=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.deleteProduct(c))}),t._uU(19,"Delete"),t.qZA()()()}if(2&n){const e=a.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu(e.category.name),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.ingredients),t.xp6(2),t.Oqu(e.path),t.xp6(2),t.Oqu(e.weight),t.xp6(2),t.Oqu(e.price),t.xp6(2),t.Q6J("src",e.imagePath,t.LSH),t.xp6(4),t.Q6J("disabled",o.editStatus)}}function V(n,a){if(1&n&&(t.TgZ(0,"table",20)(1,"thead")(2,"tr")(3,"th"),t._uU(4,"Category"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Name"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Ingredients"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Path"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Weight"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Price"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Image"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Actions"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,L,20,8,"tr",21),t.qZA()()),2&n){const e=t.oxw();t.xp6(20),t.Q6J("ngForOf",e.adminProducts)}}const $=[{path:"",component:M,children:[{path:"discount",component:S},{path:"category",component:G},{path:"product",component:(()=>{class n{constructor(e,o,i,c,d){this.categoryService=e,this.productService=o,this.fb=i,this.imageService=c,this.toastr=d,this.adminCategories=[],this.adminProducts=[],this.productsToggle=!1,this.editStatus=!1,this.uploadPercent=0,this.isUploaded=!1}ngOnInit(){this.loadCategories(),this.loadProducts(),this.initProductForm()}initProductForm(){this.productForm=this.fb.group({category:[null,r.kI.required],name:[null,r.kI.required],description:[null],ingredients:[null,r.kI.required],path:[null,r.kI.required],weight:[null,r.kI.required],price:[null,r.kI.required],imagePath:[null,r.kI.required],count:[1]})}loadCategories(){this.categoryService.getAllFirebase().subscribe(e=>{this.adminCategories=e,this.productForm.patchValue({category:this.adminCategories[0].id})})}loadProducts(){this.productService.getAllFirebase().subscribe(e=>{this.adminProducts=e})}toggleForm(){this.productsToggle=!this.productsToggle}saveProduct(){this.editStatus?this.productService.updateFirebase(this.productForm.value,this.currProductID).then(()=>{this.loadProducts(),this.toastr.success("Product successfully updated")}):this.productService.createFirebase(this.productForm.value).then(()=>{this.loadProducts(),this.toastr.success("Product successfully created")}),this.editStatus=!1,this.productForm.reset(),this.isUploaded=!1,this.toggleForm(),this.uploadPercent=0}editProduct(e){this.productForm.patchValue({category:e.category,name:e.name,ingredients:e.ingredients,path:e.path,weight:e.weight,price:e.price,imagePath:e.imagePath}),this.editStatus=!0,this.currProductID=e.id,this.isUploaded=!0,this.toggleForm()}deleteProduct(e){this.productService.deleteFirebase(e.id).then(()=>{this.loadProducts(),this.toastr.success("Product successfully deleted")})}upload(e){const o=e.target.files[0];this.imageService.uploadFile("images",o.name,o).then(i=>{this.productForm.patchValue({imagePath:i}),this.isUploaded=!0}).catch(i=>{console.error(i)})}deleteImage(){this.imageService.deleteUploadFile(this.valueByControl("imagePath")).then(()=>{this.isUploaded=!1,this.uploadPercent=0,this.productForm.patchValue({imagePath:null})}).catch(e=>{console.log(e)})}valueByControl(e){return this.productForm.get(e)?.value}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C.H),t.Y36(H.M),t.Y36(r.qu),t.Y36(P),t.Y36(h._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-product"]],decls:5,vars:2,consts:[[1,"admin-table"],["type","button",1,"add-btn",3,"click"],["class","add-form fade-in-down",3,"formGroup","ngSubmit",4,"ngIf"],["class","fade-in-down",4,"ngIf"],[1,"add-form","fade-in-down",3,"formGroup","ngSubmit"],["formControlName","category",1,"form-select"],[3,"ngValue",4,"ngFor","ngForOf"],["type","text","name","name","placeholder","*Name","formControlName","name",1,"name-input"],["type","text","name","path","placeholder","*Path","formControlName","path"],["type","text","name","ingredients","placeholder","*Ingredients","formControlName","ingredients",1,"ingredients-input"],["type","text","name","weight","placeholder","*Weight","formControlName","weight",1,"name-input"],["type","number","name","price","placeholder","*Price","formControlName","price"],[4,"ngIf"],["type","submit",3,"disabled"],[3,"ngValue"],["type","file","name","","id","",3,"change"],[1,"progress"],[1,"bar"],["width","10%","alt","",3,"src"],["type","button",3,"click"],[1,"fade-in-down"],[4,"ngFor","ngForOf"],[1,"table-img"],["alt","","height","50px",3,"src"],[1,"btns-wrapper"],["type","button",1,"table-btn",3,"click"],["type","button",1,"table-btn",3,"disabled","click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return o.toggleForm()}),t._uU(2,"ADD PRODUCT"),t.qZA(),t.YNc(3,K,16,6,"form",2),t.YNc(4,V,21,1,"table",3),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",o.productsToggle),t.xp6(1),t.Q6J("ngIf",!o.productsToggle))},dependencies:[u.sg,u.O5,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r.JJ,r.JL,r.sg,r.u],styles:["table[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid rgb(215,213,230)}td[_ngcontent-%COMP%]{padding:30px 10px 10px}thead[_ngcontent-%COMP%]{border-bottom:3px solid #b5d8f7}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:10px 10px 18px}th[_ngcontent-%COMP%]{min-width:100px;text-align:left;font-weight:400}.table-img[_ngcontent-%COMP%]{position:relative;min-width:150px}.table-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:16px}.table-descr[_ngcontent-%COMP%]{max-width:300px}.add-btn[_ngcontent-%COMP%]{padding:16px 46px;font-size:18px;font-weight:700;border-radius:10px;background-color:#fff;border:2px solid #b5d8f7;margin-bottom:16px}.add-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:50px}.add-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:250px;padding:16px;font-size:18px;font-weight:700;border-radius:10px;background-color:#fff;border:2px solid #b5d8f7;margin-top:14px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:248px;border-radius:8px;border:2px solid rgb(227,225,240);padding:14px 30px 14px 16px;margin-top:14px}select[_ngcontent-%COMP%]{width:510px;padding:8px 30px 8px 16px}.name-input[_ngcontent-%COMP%]{margin-right:14px}.ingredients-input[_ngcontent-%COMP%]{width:510px}.descr[_ngcontent-%COMP%]{width:465px;padding-bottom:100px}input[_ngcontent-%COMP%]:focus{outline:3px solid rgba(89,172,255,.3);border-color:#59acff99}.btns-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.table-btn[_ngcontent-%COMP%]{background-color:inherit;border:none;font-size:16px;font-weight:700;color:#b5d8f7;margin-bottom:6px;text-align:left}.progress[_ngcontent-%COMP%]{display:block;max-width:250px;height:20px;background-color:#fff2df;margin-top:10px;border-radius:5px}.bar[_ngcontent-%COMP%]{display:block;width:0%;height:100%;background-color:#b5d8f7;border-radius:5px}input[type=file][_ngcontent-%COMP%]{width:510px}input[type=file][_ngcontent-%COMP%]::-webkit-file-upload-button{background-color:#fff2df;color:#000;border-radius:5px;border:2px solid #fff2df;padding:4px;font-size:16px;cursor:pointer}.fade-in-down[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_fadeInDown;animation-duration:.3s;animation-fill-mode:both}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translate3d(0,-10%,0)}to{opacity:1;transform:none}}"]}),n})()},{path:"",pathMatch:"full",redirectTo:"discount"}]}];let R=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Bz.forChild($),g.Bz]}),n})(),j=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,R,y.m]}),n})()}}]);